---

- name: Check if Google Cloud SDK is installed
  command: gcloud version
  register: gcloud_installed
  changed_when: false
  ignore_errors: yes

- fail:
    msg: "Please make sure Google Cloud SDK is installed before executing the role."
  when: gcloud_installed | failed

- name: Create instance on google cloud platform
  command: gcloud compute instances create "{{ item }}"
  changed_when: false
  with_items: "{{ instance_name }}"
